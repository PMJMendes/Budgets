@using Krypton.Budgets.Blazor.UI.Budgets.BudgetPage._Core
@using Krypton.Budgets.Blazor.UI.Users._Common;

@if (Level == SecurityLevel.ADMIN || Level == SecurityLevel.PRODUCER)
{
    <MudItem xs="4" Style="page-break-inside: avoid;">
        <MudText Typo="Typo.body1">&nbsp;</MudText>
    </MudItem>
    <MudItem xs="2">
        <MudText Typo="Typo.body1">@Model.Supplier</MudText>
    </MudItem>
    <MudItem xs="2">
        <MudText Typo="Typo.body1" Style="">@Model.Text</MudText>
    </MudItem>
}
else
{
    <MudItem xs="3" Style="page-break-inside: avoid;">
        <MudText Typo="Typo.body1">&nbsp;</MudText>
    </MudItem>
    @if (Level != SecurityLevel.ASSISTANT)
    {
        <MudItem xs="1" />
    }
}
<MudItem xs="1" Class="justify-end">
    <MudText Typo="Typo.body1">@Model.CostValue?.AsAnyValue()</MudText>
</MudItem>
<MudItem xs="1" />
@if (Level != SecurityLevel.ASSISTANT)
{
    <MudItem xs="2" />
}
@if (Level != SecurityLevel.ADMIN && Level != SecurityLevel.PRODUCER)
{
    <MudItem xs="2">
        <MudText Typo="Typo.body1">@Model.Supplier</MudText>
    </MudItem>
    <MudItem xs="@LastColWidth">
        <MudText Typo="Typo.body1">@Model.Text</MudText>
    </MudItem>
}

@code {
    [Parameter]
    public CostModel Model { get; set; } = default!;

    [CascadingParameter]
    public SecurityLevel Level { get; set; }

    private int LastColWidth => Level switch
    {
        SecurityLevel.ASSISTANT => 5,
        SecurityLevel.ACCOUNTING => 2,
        _ => 0
    };
}
