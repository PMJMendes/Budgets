@using Krypton.Budgets.Blazor.UI.Budgets.BudgetPage._Core
@using Krypton.Budgets.Blazor.UI.Users._Common;
@using Krypton.Budgets.Shared

@inherits LocalizedComponent<BudgetsRouter>

<MudItem xs="12">
    <MudText Typo="Typo.body1">Orçamento Nº @Code</MudText>
</MudItem>

<MudItem xs="12" Class="justify-center">
    <MudText Typo="Typo.h4">@Model.FrontData.Title</MudText>
</MudItem>

<MudItem xs="1">
    <MudText Typo="Typo.body1" Style="font-weight:bold;">Produto:</MudText>
</MudItem>
<MudItem xs="11">
    <MudText Typo="Typo.body1">@Model.FrontData.Product</MudText>
</MudItem>
<MudItem xs="1">
    <MudText Typo="Typo.body1" Style="font-weight:bold;">Cliente:</MudText>
</MudItem>
<MudItem xs="11">
    <MudText Typo="Typo.body1">@Model.FrontData.FinalClient</MudText>
</MudItem>
<MudItem xs="1">
    <MudText Typo="Typo.body1" Style="font-weight:bold;">Agência:</MudText>
</MudItem>
<MudItem xs="11">
    <MudText Typo="Typo.body1">@Model.FrontData.Agency</MudText>
</MudItem>

<MudItem xs="2" />
<MudItem xs="1" Class="justify-center">
    <MudText Typo="Typo.body1" Style="font-weight:bold;">Orçamento</MudText>
</MudItem>
    @if (Level != SecurityLevel.ASSISTANT)
{
    <MudItem xs="1" Class="justify-center">
        <MudText Typo="Typo.body1" Style="font-weight:bold;">% BCA</MudText>
    </MudItem>
    <MudItem xs="1" Class="justify-center">
        <MudText Typo="Typo.body1" Style="font-weight:bold;">BCA</MudText>
    </MudItem>
    <MudItem xs="1" Class="justify-center">
        <MudText Typo="Typo.body1" Style="font-weight:bold;">Orç c/ BCA</MudText>
    </MudItem>
    <MudItem xs="1" Class="justify-center">
        <MudText Typo="Typo.body1" Style="font-weight:bold;">Rúbricas</MudText>
    </MudItem>
    <MudItem xs="1" Class="justify-center">
        <MudText Typo="Typo.body1" Style="font-weight:bold;">Orc. Prod.</MudText>
    </MudItem>
}
<MudItem xs="1" Class="justify-center">
    <MudText Typo="Typo.body1" Style="font-weight:bold;">Custos</MudText>
</MudItem>
<MudItem xs="1" Class="justify-center">
    <MudText Typo="Typo.body1" Style="font-weight:bold;">Disponível</MudText>
</MudItem>
@if (Level != SecurityLevel.ASSISTANT)
{
    <MudItem xs="1" Class="justify-center">
        <MudText Typo="Typo.body1" Style="font-weight:bold;">Facturas</MudText>
    </MudItem>
    <MudItem xs="1" Class="justify-center">
        <MudText Typo="Typo.body1" Style="font-weight:bold;">Resultados</MudText>
    </MudItem>
}
@if (Level == SecurityLevel.ASSISTANT)
{
    <MudItem xs="7" />
}

<MudItem xs="2" Class="border-t-2">
    <MudText Typo="Typo.h6">Sub-Totais</MudText>
</MudItem>
<MudItem xs="1" Class="border-t-2 justify-end">
    <MudText Typo="Typo.h6">@(((IBudget)Model).Value.AsAnyValue())</MudText>
</MudItem>
@if (Level != SecurityLevel.ASSISTANT)
{
    <MudItem xs="1" Class="border-t-2 justify-end">
        <MudText Typo="Typo.h6">@((((IBudget)Model).BCAPercent?.AsAnyValue() + '%') ?? "-")</MudText>
    </MudItem>
    <MudItem xs="1" Class="border-t-2 justify-end">
        <MudText Typo="Typo.h6">@(((IBudget)Model).BCAValue.AsAnyValue())</MudText>
    </MudItem>
    <MudItem xs="1" Class="border-t-2 justify-end">
        <MudText Typo="Typo.h6">@(((IBudget)Model).ClientValue.AsAnyValue())</MudText>
    </MudItem>
    <MudItem xs="1" Class="border-t-2 justify-end">
        <MudText Typo="Typo.h6">@(((IBudget)Model).GroupsValue.AsAnyValue())</MudText>
    </MudItem>
    <MudItem xs="1" Class="border-t-2 justify-end">
        <MudText Typo="Typo.h6">@(((IBudget)Model).ProdValue.AsAnyValue())</MudText>
    </MudItem>
}
<MudItem xs="1" Class="border-t-2 justify-end">
    <MudText Typo="Typo.h6">@(((IBudget)Model).CostValue.AsAnyValue())</MudText>
</MudItem>
<MudItem xs="1" Class="border-t-2 justify-end">
    <MudText Typo="Typo.h6">@(((IBudget)Model).Available.AsAnyValue())</MudText>
</MudItem>
@if (Level != SecurityLevel.ASSISTANT)
{
    <MudItem xs="1" Class="border-t-2 justify-end">
        <MudText Typo="Typo.h6">@(((IBudget)Model).InvoicedValue.AsAnyValue())</MudText>
    </MudItem>
    <MudItem xs="1" Class="border-t-2 justify-end">
        <MudText Typo="Typo.h6">@(((IBudget)Model).BaseMargin.AsAnyValue())</MudText>
    </MudItem>
}
@if (Level == SecurityLevel.ASSISTANT)
{
    <MudItem xs="7" Class="border-t-2">
        <MudText Typo="Typo.h6">&nbsp;</MudText>
    </MudItem>
}

@code {
    [Parameter]
    public BudgetModel Model { get; set; } = default!;

    [Parameter]
    public string Code { get; set; } = default!;

    [CascadingParameter]
    public SecurityLevel Level { get; set; }
}
