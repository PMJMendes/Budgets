@using Krypton.Budgets.Blazor.APIClient.Global.AllUsers

@inherits LocalizedComponent<UsersRouter>

<MudStack Spacing="0" Class="viewport">
    <MudContainer MaxWidth="MaxWidth.False" Class="viewport-header">
        <MudText Typo="Typo.h5" Class="pa-2">@L["USER:NAVIGATOR:TITLE"]</MudText>
        <MudSpacer />
        <MudIconButton Icon="@Icons.Material.Filled.AddCircleOutline" OnClick="@OnCreateNew" />
    </MudContainer>

    <MudContainer MaxWidth="MaxWidth.False" Class="viewport-body">
        <UserNavigatorList Model="@Model.Users" SelectedID="@Model.SelectedId" UserSelected="@OnUserSelected" />
    </MudContainer>
</MudStack>

@code {
    [Parameter]
    public UserNavigatorModel Model { get; set; } = UserNavigatorModel.Empty();

    [CascadingParameter]
    public IUserPageController Page { get; set; } = default!;

    private void OnCreateNew() => Page.OnCreate();

    private void OnUserSelected(Guid id) => Page.OnView(id);
}
